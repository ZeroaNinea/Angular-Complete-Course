stages {
    stage('Install Dependencies') {
        steps {
            script {
                sh 'cd /app && npm cache clean --force && rm -rf node_modules package-lock.json && npm install'
            }
        }
    }
    stage('Run Karma Tests') {
        steps {
            script {
                sh 'cd /app && ng test --code-coverage --browsers=ChromeHeadless'
            }
        }
    }
}

